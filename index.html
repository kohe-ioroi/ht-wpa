<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/index.css" />
    <script>
        // manifestのlinkタグを生成
        function setManifest(path) {
            const manifest = document.createElement('link');
            manifest.rel = 'manifest';
            manifest.href = path;
            document.head.appendChild(manifest);
        }

        // OSに応じて読み込むmanifestを変更
        var userAgent = navigator.userAgent.toLowerCase();
        if (userAgent.indexOf("iphone") > 0 || userAgent.indexOf("ipad") > 0) {
            setManifest('manifest_ios.json')
        } else {
            setManifest('manifest.json')
        }

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }).catch(function(err) {
                console.log('ServiceWorker registration failed: ', err);
            });
        }
    </script>
    <script>
        document.addEventListener("mousewheel", scroll_control, { passive: false });
        document.addEventListener("touchmove", scroll_control, { passive: false });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/pwacompat" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>HT</title>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js').then(function () { console.log('Service Worker Registered'); });
        }
    </script>
</head>
<body>
    <div id=load><img src="img/loading.gif" class="loading"><p class="center">通信中</p></div>
    <div id=main>
    <h3 class="center">ﾐﾆﾊﾝﾃﾞｨ ﾊｰﾊﾞｰﾗﾝﾄﾞ店(20年12月12日ﾃﾞｰﾀ)</h3>
    <div id="input-area" class="center">
        <form onsubmit="return false;" action="">
            <input type="tel" id="jancode" name="jan_code" placeholder="JANコード" autocomplete="off" maxlength="13" style="width:13em;height:30px;font-size: 100%;">
            <button style="height:30px; width:50px;"onclick="sendRequest_input()">検索</button>
        </form>
    </div>
    <div class="center"><progress id="scanprogress" value="0" max="10" style="width:50%;height:30px;"></progress><p>↑ゲージが最大になるまでかざす↑</p><p>↓読み取りにくい時はバーコードを動かす↓</p></div>
    <div id="photo-area" class="viewport"></div>
    <script src="js/lib/jquery.min.js" type="text/javascript"></script>
    <script src="js/lib/quagga.min.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>
    </div>
</body>
</html>